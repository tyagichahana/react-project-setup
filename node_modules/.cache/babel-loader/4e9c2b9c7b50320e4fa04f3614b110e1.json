{"ast":null,"code":"import _regeneratorRuntime from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _ from 'lodash';\nimport Store from '@/reducer';\nimport Api from '@/utils/Api';\nimport * as Types from '@/constants/Types';\nimport history from '@/utils/history';\nexport var getParentDetails =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(parentId) {\n    var response, data, error, success;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_LOADING\n            });\n            _context.prev = 1;\n            _context.next = 4;\n            return Api.GetParentDetails(parentId);\n\n          case 4:\n            response = _context.sent;\n            data = response.data, error = response.error, success = response.success;\n\n            if (!success) {\n              _context.next = 11;\n              break;\n            }\n\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_SUCCESS,\n              data: data\n            });\n            return _context.abrupt(\"return\", data);\n\n          case 11:\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE,\n              data: error\n            });\n\n          case 12:\n            _context.next = 18;\n            break;\n\n          case 14:\n            _context.prev = 14;\n            _context.t0 = _context[\"catch\"](1);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE\n            });\n            return _context.abrupt(\"return\", null);\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this, [[1, 14]]);\n  }));\n\n  return function getParentDetails(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var CreateCampaignBulk =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(requests, next) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_LOADING\n            });\n            _context2.prev = 1;\n            requests = _.map(requests, function (part) {\n              return Api.CreateCampaignAction(part);\n            });\n            _context2.next = 5;\n            return Promise.all(requests);\n\n          case 5:\n            response = _context2.sent;\n\n            _.forEach(response, function (res) {\n              var data = res.data,\n                  success = res.success,\n                  error = res.error;\n              console.log(data, success, 'ressdfghjkhgfdsdfghj');\n\n              if (success) {\n                Store.dispatch({\n                  type: Types.CREATE_CAMPAIGN_SUCCESS,\n                  data: data\n                });\n\n                if (next) {\n                  history.push(next);\n                }\n              } else {\n                Store.dispatch({\n                  type: Types.CREATE_CAMPAIGN_FAILURE,\n                  data: error\n                });\n              }\n            });\n\n            _context2.next = 12;\n            break;\n\n          case 9:\n            _context2.prev = 9;\n            _context2.t0 = _context2[\"catch\"](1);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE,\n              data: _context2.t0.message\n            });\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this, [[1, 9]]);\n  }));\n\n  return function CreateCampaignBulk(_x2, _x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var UpdateCampaignBulk =\n/*#__PURE__*/\nfunction () {\n  var _ref3 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(requests, next) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_LOADING\n            });\n            _context3.prev = 1;\n            requests = _.map(requests, function (part) {\n              return Api.UpdateCampaign(part);\n            });\n            _context3.next = 5;\n            return Promise.all(requests);\n\n          case 5:\n            response = _context3.sent;\n\n            _.forEach(response, function (res) {\n              var data = res.data,\n                  success = res.success,\n                  error = res.error;\n\n              if (success) {\n                Store.dispatch({\n                  type: Types.CREATE_CAMPAIGN_SUCCESS,\n                  data: data\n                });\n                history.push(next);\n              } else {\n                Store.dispatch({\n                  type: Types.CREATE_CAMPAIGN_FAILURE,\n                  data: error\n                });\n              }\n            });\n\n            _context3.next = 13;\n            break;\n\n          case 9:\n            _context3.prev = 9;\n            _context3.t0 = _context3[\"catch\"](1);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE\n            });\n            return _context3.abrupt(\"return\", null);\n\n          case 13:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, this, [[1, 9]]);\n  }));\n\n  return function UpdateCampaignBulk(_x4, _x5) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var UploadContent =\n/*#__PURE__*/\nfunction () {\n  var _ref4 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4(file) {\n    var category,\n        formData,\n        response,\n        _args4 = arguments;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            category = _args4.length > 1 && _args4[1] !== undefined ? _args4[1] : 'email_template';\n            _context4.prev = 1;\n            formData = new FormData();\n            formData.append('file', file);\n            formData.append('category', category);\n            _context4.next = 7;\n            return Api.CreateContent(formData);\n\n          case 7:\n            response = _context4.sent;\n            return _context4.abrupt(\"return\", response);\n\n          case 11:\n            _context4.prev = 11;\n            _context4.t0 = _context4[\"catch\"](1);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE,\n              data: _context4.t0.message\n            });\n            return _context4.abrupt(\"return\", null);\n\n          case 15:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, this, [[1, 11]]);\n  }));\n\n  return function UploadContent(_x6) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nexport var uploadFile =\n/*#__PURE__*/\nfunction () {\n  var _ref5 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee5(file) {\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return UploadContent(file);\n\n          case 2:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5, this);\n  }));\n\n  return function uploadFile(_x7) {\n    return _ref5.apply(this, arguments);\n  };\n}(); // export const CreateCampaignAction = async ({ next, ...params }) => {\n//     Store.dispatch({\n//         type: Types.CREATE_CAMPAIGN_LOADING,\n//     })\n//     try {\n//         const response = await Api.CreateCampaignAction({ ...params })\n//         const { success, data, error } = response\n//         if (success) {\n//             Store.dispatch({\n//                 type: Types.CREATE_CAMPAIGN_UPDATE_DATA,\n//                 data: _.assign({}, params, data),\n//             })\n//             history.push(`/email/${next}/${response.campaignId}`)\n//         } else {\n//             Store.dispatch({\n//                 type: Types.CREATE_CAMPAIGN_FAILURE,\n//                 data: error,\n//             })\n//         }\n//     } catch (err) {\n//         Store.dispatch({\n//             type: Types.CREATE_CAMPAIGN_FAILURE,\n//             data: err.message,\n//         })\n//     }\n// }","map":{"version":3,"sources":["/Users/chahanatyagi/Work/cm-frontend/src/actions/CreateCampaign/PnCampaign.js"],"names":["_","Store","Api","Types","history","getParentDetails","parentId","dispatch","type","CREATE_CAMPAIGN_LOADING","GetParentDetails","response","data","error","success","CREATE_CAMPAIGN_SUCCESS","CREATE_CAMPAIGN_FAILURE","CreateCampaignBulk","requests","next","map","part","CreateCampaignAction","Promise","all","forEach","res","console","log","push","message","UpdateCampaignBulk","UpdateCampaign","UploadContent","file","category","formData","FormData","append","CreateContent","uploadFile"],"mappings":";;AAAA,OAAOA,CAAP,MAAc,QAAd;AACA,OAAOC,KAAP,MAAkB,WAAlB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAO,KAAKC,KAAZ,MAAuB,mBAAvB;AACA,OAAOC,OAAP,MAAoB,iBAApB;AAEA,OAAO,IAAMC,gBAAgB;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG,iBAAMC,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAC5BL,YAAAA,KAAK,CAACM,QAAN,CAAe;AACXC,cAAAA,IAAI,EAAEL,KAAK,CAACM;AADD,aAAf;AAD4B;AAAA;AAAA,mBAKDP,GAAG,CAACQ,gBAAJ,CAAqBJ,QAArB,CALC;;AAAA;AAKlBK,YAAAA,QALkB;AAMhBC,YAAAA,IANgB,GAMSD,QANT,CAMhBC,IANgB,EAMVC,KANU,GAMSF,QANT,CAMVE,KANU,EAMHC,OANG,GAMSH,QANT,CAMHG,OANG;;AAAA,iBAOpBA,OAPoB;AAAA;AAAA;AAAA;;AAQpBb,YAAAA,KAAK,CAACM,QAAN,CAAe;AACXC,cAAAA,IAAI,EAAEL,KAAK,CAACY,uBADD;AAEXH,cAAAA,IAAI,EAAEA;AAFK,aAAf;AARoB,6CAYbA,IAZa;;AAAA;AAcpBX,YAAAA,KAAK,CAACM,QAAN,CAAe;AACXC,cAAAA,IAAI,EAAEL,KAAK,CAACa,uBADD;AAEXJ,cAAAA,IAAI,EAAEC;AAFK,aAAf;;AAdoB;AAAA;AAAA;;AAAA;AAAA;AAAA;AAoBxBZ,YAAAA,KAAK,CAACM,QAAN,CAAe;AACXC,cAAAA,IAAI,EAAEL,KAAK,CAACa;AADD,aAAf;AApBwB,6CAuBjB,IAvBiB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAhBX,gBAAgB;AAAA;AAAA;AAAA,GAAtB;AA2BP,OAAO,IAAMY,kBAAkB;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG,kBAAOC,QAAP,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAC9BlB,YAAAA,KAAK,CAACM,QAAN,CAAe;AACXC,cAAAA,IAAI,EAAEL,KAAK,CAACM;AADD,aAAf;AAD8B;AAK1BS,YAAAA,QAAQ,GAAGlB,CAAC,CAACoB,GAAF,CAAMF,QAAN,EAAgB,UAAAG,IAAI,EAAI;AAC/B,qBAAOnB,GAAG,CAACoB,oBAAJ,CAAyBD,IAAzB,CAAP;AACH,aAFU,CAAX;AAL0B;AAAA,mBAQHE,OAAO,CAACC,GAAR,CAAYN,QAAZ,CARG;;AAAA;AAQpBP,YAAAA,QARoB;;AAS1BX,YAAAA,CAAC,CAACyB,OAAF,CAAUd,QAAV,EAAoB,UAAAe,GAAG,EAAI;AAAA,kBACfd,IADe,GACUc,GADV,CACfd,IADe;AAAA,kBACTE,OADS,GACUY,GADV,CACTZ,OADS;AAAA,kBACAD,KADA,GACUa,GADV,CACAb,KADA;AAEvBc,cAAAA,OAAO,CAACC,GAAR,CAAYhB,IAAZ,EAAkBE,OAAlB,EAA2B,sBAA3B;;AACA,kBAAIA,OAAJ,EAAa;AACTb,gBAAAA,KAAK,CAACM,QAAN,CAAe;AACXC,kBAAAA,IAAI,EAAEL,KAAK,CAACY,uBADD;AAEXH,kBAAAA,IAAI,EAAEA;AAFK,iBAAf;;AAIA,oBAAIO,IAAJ,EAAU;AACNf,kBAAAA,OAAO,CAACyB,IAAR,CAAaV,IAAb;AACH;AACJ,eARD,MAQO;AACHlB,gBAAAA,KAAK,CAACM,QAAN,CAAe;AACXC,kBAAAA,IAAI,EAAEL,KAAK,CAACa,uBADD;AAEXJ,kBAAAA,IAAI,EAAEC;AAFK,iBAAf;AAIH;AACJ,aAjBD;;AAT0B;AAAA;;AAAA;AAAA;AAAA;AA4B1BZ,YAAAA,KAAK,CAACM,QAAN,CAAe;AACXC,cAAAA,IAAI,EAAEL,KAAK,CAACa,uBADD;AAEXJ,cAAAA,IAAI,EAAE,aAAIkB;AAFC,aAAf;;AA5B0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAlBb,kBAAkB;AAAA;AAAA;AAAA,GAAxB;AAmCP,OAAO,IAAMc,kBAAkB;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG,kBAAOb,QAAP,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAC9BlB,YAAAA,KAAK,CAACM,QAAN,CAAe;AACXC,cAAAA,IAAI,EAAEL,KAAK,CAACM;AADD,aAAf;AAD8B;AAM1BS,YAAAA,QAAQ,GAAGlB,CAAC,CAACoB,GAAF,CAAMF,QAAN,EAAgB,UAAAG,IAAI,EAAI;AAC/B,qBAAOnB,GAAG,CAAC8B,cAAJ,CAAmBX,IAAnB,CAAP;AACH,aAFU,CAAX;AAN0B;AAAA,mBASHE,OAAO,CAACC,GAAR,CAAYN,QAAZ,CATG;;AAAA;AASpBP,YAAAA,QAToB;;AAU1BX,YAAAA,CAAC,CAACyB,OAAF,CAAUd,QAAV,EAAoB,UAAAe,GAAG,EAAI;AAAA,kBACfd,IADe,GACUc,GADV,CACfd,IADe;AAAA,kBACTE,OADS,GACUY,GADV,CACTZ,OADS;AAAA,kBACAD,KADA,GACUa,GADV,CACAb,KADA;;AAEvB,kBAAIC,OAAJ,EAAa;AACTb,gBAAAA,KAAK,CAACM,QAAN,CAAe;AACXC,kBAAAA,IAAI,EAAEL,KAAK,CAACY,uBADD;AAEXH,kBAAAA,IAAI,EAAEA;AAFK,iBAAf;AAIAR,gBAAAA,OAAO,CAACyB,IAAR,CAAaV,IAAb;AACH,eAND,MAMO;AACHlB,gBAAAA,KAAK,CAACM,QAAN,CAAe;AACXC,kBAAAA,IAAI,EAAEL,KAAK,CAACa,uBADD;AAEXJ,kBAAAA,IAAI,EAAEC;AAFK,iBAAf;AAIH;AACJ,aAdD;;AAV0B;AAAA;;AAAA;AAAA;AAAA;AA0B1BZ,YAAAA,KAAK,CAACM,QAAN,CAAe;AACXC,cAAAA,IAAI,EAAEL,KAAK,CAACa;AADD,aAAf;AA1B0B,8CA6BnB,IA7BmB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAlBe,kBAAkB;AAAA;AAAA;AAAA,GAAxB;AAiCP,OAAO,IAAME,aAAa;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG,kBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAaC,YAAAA,QAAb,8DAAwB,gBAAxB;AAAA;AAEfC,YAAAA,QAFe,GAEJ,IAAIC,QAAJ,EAFI;AAGrBD,YAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBJ,IAAxB;AACAE,YAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4BH,QAA5B;AAJqB;AAAA,mBAKEjC,GAAG,CAACqC,aAAJ,CAAkBH,QAAlB,CALF;;AAAA;AAKfzB,YAAAA,QALe;AAAA,8CAMdA,QANc;;AAAA;AAAA;AAAA;AAQrBV,YAAAA,KAAK,CAACM,QAAN,CAAe;AACXC,cAAAA,IAAI,EAAEL,KAAK,CAACa,uBADD;AAEXJ,cAAAA,IAAI,EAAE,aAAEkB;AAFG,aAAf;AARqB,8CAYd,IAZc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAbG,aAAa;AAAA;AAAA;AAAA,GAAnB;AAgBP,OAAO,IAAMO,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG,kBAAMN,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAChBD,aAAa,CAACC,IAAD,CADG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAVM,UAAU;AAAA;AAAA;AAAA,GAAhB,C,CAIP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import _ from 'lodash'\nimport Store from '@/reducer'\nimport Api from '@/utils/Api'\nimport * as Types from '@/constants/Types'\nimport history from '@/utils/history'\n\nexport const getParentDetails = async parentId => {\n    Store.dispatch({\n        type: Types.CREATE_CAMPAIGN_LOADING,\n    })\n    try {\n        const response = await Api.GetParentDetails(parentId)\n        const { data, error, success } = response\n        if (success) {\n            Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_SUCCESS,\n                data: data,\n            })\n            return data\n        } else {\n            Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_FAILURE,\n                data: error,\n            })\n        }\n    } catch (err) {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_FAILURE,\n        })\n        return null\n    }\n}\n\nexport const CreateCampaignBulk = async (requests, next) => {\n    Store.dispatch({\n        type: Types.CREATE_CAMPAIGN_LOADING,\n    })\n    try {\n        requests = _.map(requests, part => {\n            return Api.CreateCampaignAction(part)\n        })\n        const response = await Promise.all(requests)\n        _.forEach(response, res => {\n            const { data, success, error } = res\n            console.log(data, success, 'ressdfghjkhgfdsdfghj')\n            if (success) {\n                Store.dispatch({\n                    type: Types.CREATE_CAMPAIGN_SUCCESS,\n                    data: data,\n                })\n                if (next) {\n                    history.push(next)\n                }\n            } else {\n                Store.dispatch({\n                    type: Types.CREATE_CAMPAIGN_FAILURE,\n                    data: error,\n                })\n            }\n        })\n    } catch (err) {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_FAILURE,\n            data: err.message,\n        })\n    }\n}\n\nexport const UpdateCampaignBulk = async (requests, next) => {\n    Store.dispatch({\n        type: Types.CREATE_CAMPAIGN_LOADING,\n    })\n\n    try {\n        requests = _.map(requests, part => {\n            return Api.UpdateCampaign(part)\n        })\n        const response = await Promise.all(requests)\n        _.forEach(response, res => {\n            const { data, success, error } = res\n            if (success) {\n                Store.dispatch({\n                    type: Types.CREATE_CAMPAIGN_SUCCESS,\n                    data: data,\n                })\n                history.push(next)\n            } else {\n                Store.dispatch({\n                    type: Types.CREATE_CAMPAIGN_FAILURE,\n                    data: error,\n                })\n            }\n        })\n    } catch (err) {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_FAILURE,\n        })\n        return null\n    }\n}\n\nexport const UploadContent = async (file, category = 'email_template') => {\n    try {\n        const formData = new FormData()\n        formData.append('file', file)\n        formData.append('category', category)\n        const response = await Api.CreateContent(formData)\n        return response\n    } catch (e) {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_FAILURE,\n            data: e.message,\n        })\n        return null\n    }\n}\n\nexport const uploadFile = async file => {\n    await UploadContent(file)\n}\n\n// export const CreateCampaignAction = async ({ next, ...params }) => {\n//     Store.dispatch({\n//         type: Types.CREATE_CAMPAIGN_LOADING,\n//     })\n//     try {\n//         const response = await Api.CreateCampaignAction({ ...params })\n//         const { success, data, error } = response\n//         if (success) {\n//             Store.dispatch({\n//                 type: Types.CREATE_CAMPAIGN_UPDATE_DATA,\n//                 data: _.assign({}, params, data),\n//             })\n//             history.push(`/email/${next}/${response.campaignId}`)\n//         } else {\n//             Store.dispatch({\n//                 type: Types.CREATE_CAMPAIGN_FAILURE,\n//                 data: error,\n//             })\n//         }\n//     } catch (err) {\n//         Store.dispatch({\n//             type: Types.CREATE_CAMPAIGN_FAILURE,\n//             data: err.message,\n//         })\n//     }\n// }\n"]},"metadata":{},"sourceType":"module"}