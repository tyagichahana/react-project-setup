{"ast":null,"code":"import _objectSpread from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _ from 'lodash';\nimport Store from '@/reducer';\nimport Api from '@/utils/Api';\nimport * as Types from '@/constants/Types';\nimport history from '@/utils/history';\nexport var camp = {\n  parentID: 26,\n  icon: 'http://image.ikinaki.in/post/411_post_098b7870284d48cbbc92f7a1212f9677.jpg',\n  sound: 'toko_test',\n  source: 'toko-cm',\n  type: 'General',\n  channel: 'Digital',\n  title: 'Mega Sale',\n  campaignType: 'general',\n  description: 'Sale starts at 1 pm,you can load your cart. $name',\n  message: '40% discount on merchandise $name',\n  name: 'My campaign',\n  senderName: 'tokopedia',\n  senderEmailId: 'mail@gmail.com',\n  replyToEmailId: 'replier@gmai.com',\n  media: 'http://image.ikinaki.in/post/411_post_098b7870284d48cbbc92f7a1212f9677.jpg',\n  appLink: 'tokopedia://contactus',\n  template_path: 's3 url',\n  collapsedImg: 'https://www.abroadintheyard.com/wp-content/plugins/kk-social-share-starter/fb-share.png',\n  expandedImg: 'https://www.coraya-divers.com/en/wp-content/uploads/sites/2/2016/04/5000_likes_en.png',\n  gapInDays: 1,\n  isRecurring: false,\n  tagList: ['tag1', 'tag2', 'tag3'],\n  deviceType: 'email',\n  userStatus: 'LOGGED_IN'\n};\nexport var createParentId =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            try {\n              Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_LOADING\n              }); // const response = await Api.createParent()\n\n              response = {\n                parentID: 33\n              };\n              Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_SUCCESS,\n                data: response\n              });\n            } catch (e) {\n              console.error(e);\n            }\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function createParentId() {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var GetCampaign =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(campaignID) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return Api.GetCampaignAction(campaignID);\n\n          case 3:\n            response = _context2.sent;\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_SUCCESS,\n              data: response\n            }); // console.log(response)\n\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE\n            });\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this, [[0, 7]]);\n  }));\n\n  return function GetCampaign(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var CreateCampaignAction =\n/*#__PURE__*/\nfunction () {\n  var _ref4 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(_ref3) {\n    var next, params, response;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            next = _ref3.next, params = _objectWithoutProperties(_ref3, [\"next\"]);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_LOADING\n            });\n            _context3.prev = 2;\n            _context3.next = 5;\n            return Api.CreateCampaignAction(_objectSpread({}, params));\n\n          case 5:\n            response = _context3.sent;\n\n            if (response) {\n              Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_UPDATE_DATA,\n                data: _.assign({}, params, response)\n              });\n              history.push(\"\".concat(next, \"/\").concat(response.campaignId));\n            }\n\n            _context3.next = 13;\n            break;\n\n          case 9:\n            _context3.prev = 9;\n            _context3.t0 = _context3[\"catch\"](2);\n            console.log('error CreateCampaignAction', _context3.t0);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE\n            });\n\n          case 13:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, this, [[2, 9]]);\n  }));\n\n  return function CreateCampaignAction(_x2) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nexport var SaveTemplate =\n/*#__PURE__*/\nfunction () {\n  var _ref5 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4(fileContent) {\n    var htmlBlob, fileName, htmlFile;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            console.log(fileContent);\n            htmlBlob = new Blob([fileContent], {\n              type: 'plain/text'\n            });\n            fileName = Math.random().toString(36).substr(2, 5) + '.html';\n            htmlFile = new File([htmlBlob], fileName);\n            console.log(htmlFile);\n\n          case 5:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, this);\n  }));\n\n  return function SaveTemplate(_x3) {\n    return _ref5.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["/Users/chahanatyagi/Work/cm-frontend/src/actions/CreateCampaign/emailCampaign.js"],"names":["_","Store","Api","Types","history","camp","parentID","icon","sound","source","type","channel","title","campaignType","description","message","name","senderName","senderEmailId","replyToEmailId","media","appLink","template_path","collapsedImg","expandedImg","gapInDays","isRecurring","tagList","deviceType","userStatus","createParentId","dispatch","CREATE_CAMPAIGN_LOADING","response","CREATE_CAMPAIGN_SUCCESS","data","e","console","error","GetCampaign","campaignID","GetCampaignAction","CREATE_CAMPAIGN_FAILURE","CreateCampaignAction","next","params","CREATE_CAMPAIGN_UPDATE_DATA","assign","push","campaignId","log","SaveTemplate","fileContent","htmlBlob","Blob","fileName","Math","random","toString","substr","htmlFile","File"],"mappings":"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","sourcesContent":["import _ from 'lodash'\nimport Store from '@/reducer'\nimport Api from '@/utils/Api'\nimport * as Types from '@/constants/Types'\nimport history from '@/utils/history'\n\nexport const camp = {\n    parentID: 26,\n    icon: 'http://image.ikinaki.in/post/411_post_098b7870284d48cbbc92f7a1212f9677.jpg',\n    sound: 'toko_test',\n    source: 'toko-cm',\n    type: 'General',\n    channel: 'Digital',\n    title: 'Mega Sale',\n\n    campaignType: 'general',\n    description: 'Sale starts at 1 pm,you can load your cart. $name',\n    message: '40% discount on merchandise $name',\n    name: 'My campaign',\n\n    senderName: 'tokopedia',\n\n    senderEmailId: 'mail@gmail.com',\n\n    replyToEmailId: 'replier@gmai.com',\n    media: 'http://image.ikinaki.in/post/411_post_098b7870284d48cbbc92f7a1212f9677.jpg',\n    appLink: 'tokopedia://contactus',\n    template_path: 's3 url',\n\n    collapsedImg:\n        'https://www.abroadintheyard.com/wp-content/plugins/kk-social-share-starter/fb-share.png',\n    expandedImg:\n        'https://www.coraya-divers.com/en/wp-content/uploads/sites/2/2016/04/5000_likes_en.png',\n\n    gapInDays: 1,\n\n    isRecurring: false,\n\n    tagList: ['tag1', 'tag2', 'tag3'],\n\n    deviceType: 'email',\n\n    userStatus: 'LOGGED_IN',\n}\n\nexport const createParentId = async () => {\n    try {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_LOADING,\n        })\n        // const response = await Api.createParent()\n        const response = { parentID: 33 }\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_SUCCESS,\n            data: response,\n        })\n    } catch (e) {\n        console.error(e)\n    }\n}\n\nexport const GetCampaign = async campaignID => {\n    try {\n        const response = await Api.GetCampaignAction(campaignID)\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_SUCCESS,\n            data: response,\n        })\n        // console.log(response)\n    } catch (err) {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_FAILURE,\n        })\n    }\n}\n\nexport const CreateCampaignAction = async ({ next, ...params }) => {\n    Store.dispatch({\n        type: Types.CREATE_CAMPAIGN_LOADING,\n    })\n    try {\n        const response = await Api.CreateCampaignAction({ ...params })\n        if (response) {\n            Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_UPDATE_DATA,\n                data: _.assign({}, params, response),\n            })\n            history.push(`${next}/${response.campaignId}`)\n        }\n    } catch (err) {\n        console.log('error CreateCampaignAction', err)\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_FAILURE,\n        })\n    }\n}\n\nexport const SaveTemplate = async fileContent => {\n    console.log(fileContent)\n    const htmlBlob = new Blob([fileContent], { type: 'plain/text' })\n    const fileName =\n        Math.random()\n            .toString(36)\n            .substr(2, 5) + '.html'\n    const htmlFile = new File([htmlBlob], fileName)\n    console.log(htmlFile)\n}\n"]},"metadata":{},"sourceType":"module"}