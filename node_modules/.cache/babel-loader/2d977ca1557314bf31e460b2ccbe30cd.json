{"ast":null,"code":"import _objectSpread from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _ from 'lodash';\nimport Store from '@/reducer';\nimport Api from '@/utils/Api';\nimport * as Types from '@/constants/Types';\nimport history from '@/utils/history';\nexport var GetCampaign =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(campaignId) {\n    var response, data, success, error;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return Api.GetCampaignAction(campaignId);\n\n          case 3:\n            response = _context.sent;\n            data = response.data, success = response.success, error = response.error;\n\n            if (success) {\n              Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_SUCCESS,\n                data: data\n              });\n            } else {\n              Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_SUCCESS,\n                data: error\n              });\n            } // return response\n\n\n            _context.next = 12;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE,\n              data: 'Oops! No response, Something went wrong.'\n            });\n            return _context.abrupt(\"return\", null);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this, [[0, 8]]);\n  }));\n\n  return function GetCampaign(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var CreateCampaignAction =\n/*#__PURE__*/\nfunction () {\n  var _ref3 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(_ref2) {\n    var next, params, response, data, success, error;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            next = _ref2.next, params = _objectWithoutProperties(_ref2, [\"next\"]);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_LOADING\n            });\n            _context2.prev = 2;\n            _context2.next = 5;\n            return Api.CreateCampaignAction(_objectSpread({}, params));\n\n          case 5:\n            response = _context2.sent;\n            data = response.data, success = response.success, error = response.error;\n\n            if (success) {\n              Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_UPDATE_DATA,\n                data: _.assign({}, params, data)\n              });\n              history.push(\"/email/\".concat(next, \"/\").concat(data.campaignId));\n            } else {\n              Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_FAILURE,\n                data: error\n              });\n            }\n\n            _context2.next = 13;\n            break;\n\n          case 10:\n            _context2.prev = 10;\n            _context2.t0 = _context2[\"catch\"](2);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE,\n              data: _context2.t0.message\n            });\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this, [[2, 10]]);\n  }));\n\n  return function CreateCampaignAction(_x2) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var UpdateCampaignData =\n/*#__PURE__*/\nfunction () {\n  var _ref5 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(_ref4) {\n    var next, campaignId, params, response, data, success, error;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            next = _ref4.next, campaignId = _ref4.campaignId, params = _objectWithoutProperties(_ref4, [\"next\", \"campaignId\"]);\n            campaignId = parseInt(campaignId, 10);\n            _context3.prev = 2;\n            _context3.next = 5;\n            return Api.UpdateCampaign(_objectSpread({\n              campaignId: campaignId\n            }, params));\n\n          case 5:\n            response = _context3.sent;\n            data = response.data, success = response.success, error = response.error;\n\n            if (success) {\n              Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_UPDATE_DATA,\n                data: _.assign({}, params, data)\n              }); // history.push(`/email/${next}/${campaignId}`)\n            } else {\n              Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_FAILURE,\n                data: error\n              });\n            }\n\n            _context3.next = 13;\n            break;\n\n          case 10:\n            _context3.prev = 10;\n            _context3.t0 = _context3[\"catch\"](2);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE,\n              data: _context3.t0.message\n            });\n\n          case 13:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, this, [[2, 10]]);\n  }));\n\n  return function UpdateCampaignData(_x3) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nexport var UploadContent =\n/*#__PURE__*/\nfunction () {\n  var _ref6 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4(file) {\n    var category,\n        formData,\n        _args4 = arguments;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            category = _args4.length > 1 && _args4[1] !== undefined ? _args4[1] : 'email_template';\n            _context4.prev = 1;\n            formData = new FormData();\n            formData.append('file', file);\n            formData.append('category', category);\n            _context4.next = 7;\n            return Api.CreateContent(formData);\n\n          case 7:\n            return _context4.abrupt(\"return\", _context4.sent);\n\n          case 10:\n            _context4.prev = 10;\n            _context4.t0 = _context4[\"catch\"](1);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE,\n              data: 'Oops! No response, Something went wrong.'\n            });\n            return _context4.abrupt(\"return\", null);\n\n          case 14:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, this, [[1, 10]]);\n  }));\n\n  return function UploadContent(_x4) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nexport var SaveStep2 =\n/*#__PURE__*/\nfunction () {\n  var _ref8 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee5(_ref7) {\n    var htmlTemplate, rest, htmlBlob, fileName, htmlFile, res, s3url;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            htmlTemplate = _ref7.htmlTemplate, rest = _objectWithoutProperties(_ref7, [\"htmlTemplate\"]);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_LOADING\n            });\n            htmlBlob = new Blob([htmlTemplate], {\n              type: 'plain/text'\n            });\n            fileName = Math.random().toString(36).substr(2, 5) + '.html';\n            htmlFile = new File([htmlBlob], fileName);\n            _context5.next = 7;\n            return UploadContent(htmlFile);\n\n          case 7:\n            res = _context5.sent;\n            s3url = res.s3url;\n            rest = _.assign({}, rest, {\n              templatePath: s3url\n            });\n            UpdateCampaignData(rest);\n\n          case 11:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5, this);\n  }));\n\n  return function SaveStep2(_x5) {\n    return _ref8.apply(this, arguments);\n  };\n}();\nexport var SaveStep4 =\n/*#__PURE__*/\nfunction () {\n  var _ref9 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee6(file) {\n    var formData;\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            formData = new FormData();\n            formData.append('input_file', file);\n            _context6.next = 4;\n            return UploadContent(file);\n\n          case 4:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6, this);\n  }));\n\n  return function SaveStep4(_x6) {\n    return _ref9.apply(this, arguments);\n  };\n}(); // aactions for sms\n\nexport var CreateSMSCampaignAction =\n/*#__PURE__*/\nfunction () {\n  var _ref11 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee7(_ref10) {\n    var next, params, response, data, success, error;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            next = _ref10.next, params = _objectWithoutProperties(_ref10, [\"next\"]);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_LOADING\n            });\n            _context7.prev = 2;\n            _context7.next = 5;\n            return Api.CreateCampaignAction(_objectSpread({}, params));\n\n          case 5:\n            response = _context7.sent;\n            data = response.data, success = response.success, error = response.error;\n\n            if (success) {\n              console.log(response, 'response on creating the campaign is here');\n              Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_UPDATE_DATA,\n                data: _.assign({}, params, response)\n              });\n              history.push(\"/sms/\".concat(next, \"/\").concat(response.campaignId));\n            }\n\n            _context7.next = 13;\n            break;\n\n          case 10:\n            _context7.prev = 10;\n            _context7.t0 = _context7[\"catch\"](2);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE,\n              data: _context7.t0.message\n            });\n\n          case 13:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7, this, [[2, 10]]);\n  }));\n\n  return function CreateSMSCampaignAction(_x7) {\n    return _ref11.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["/Users/chahanatyagi/Work/cm-frontend/src/actions/CreateCampaign/emailCampaign.js"],"names":["_","Store","Api","Types","history","GetCampaign","campaignId","GetCampaignAction","response","data","success","error","dispatch","type","CREATE_CAMPAIGN_SUCCESS","CREATE_CAMPAIGN_FAILURE","CreateCampaignAction","next","params","CREATE_CAMPAIGN_LOADING","CREATE_CAMPAIGN_UPDATE_DATA","assign","push","message","UpdateCampaignData","parseInt","UpdateCampaign","UploadContent","file","category","formData","FormData","append","CreateContent","SaveStep2","htmlTemplate","rest","htmlBlob","Blob","fileName","Math","random","toString","substr","htmlFile","File","res","s3url","templatePath","SaveStep4","CreateSMSCampaignAction","console","log"],"mappings":"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","sourcesContent":["import _ from 'lodash'\nimport Store from '@/reducer'\nimport Api from '@/utils/Api'\nimport * as Types from '@/constants/Types'\nimport history from '@/utils/history'\n\nexport const GetCampaign = async campaignId => {\n    try {\n        const response = await Api.GetCampaignAction(campaignId)\n        const { data, success, error } = response\n        if (success) {\n            Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_SUCCESS,\n                data: data,\n            })\n        } else {\n            Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_SUCCESS,\n                data: error,\n            })\n        }\n        // return response\n    } catch (err) {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_FAILURE,\n            data: 'Oops! No response, Something went wrong.',\n        })\n        return null\n    }\n}\n\nexport const CreateCampaignAction = async ({ next, ...params }) => {\n    Store.dispatch({\n        type: Types.CREATE_CAMPAIGN_LOADING,\n    })\n    try {\n        const response = await Api.CreateCampaignAction({ ...params })\n        const { data, success, error } = response\n\n        if (success) {\n            Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_UPDATE_DATA,\n                data: _.assign({}, params, data),\n            })\n            history.push(`/email/${next}/${data.campaignId}`)\n        } else {\n            Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_FAILURE,\n                data: error,\n            })\n        }\n    } catch (err) {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_FAILURE,\n            data: err.message,\n        })\n    }\n}\n\nexport const UpdateCampaignData = async ({ next, campaignId, ...params }) => {\n    campaignId = parseInt(campaignId, 10)\n    try {\n        const response = await Api.UpdateCampaign({ campaignId, ...params })\n        const { data, success, error } = response\n        if (success) {\n            Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_UPDATE_DATA,\n                data: _.assign({}, params, data),\n            })\n            // history.push(`/email/${next}/${campaignId}`)\n        } else {\n            Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_FAILURE,\n                data: error,\n            })\n        }\n    } catch (err) {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_FAILURE,\n            data: err.message,\n        })\n    }\n}\n\nexport const UploadContent = async (file, category = 'email_template') => {\n    try {\n        const formData = new FormData()\n        formData.append('file', file)\n        formData.append('category', category)\n        return await Api.CreateContent(formData)\n    } catch (e) {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_FAILURE,\n            data: 'Oops! No response, Something went wrong.',\n        })\n        return null\n    }\n}\n\nexport const SaveStep2 = async ({ htmlTemplate, ...rest }) => {\n    Store.dispatch({\n        type: Types.CREATE_CAMPAIGN_LOADING,\n    })\n\n    const htmlBlob = new Blob([htmlTemplate], { type: 'plain/text' })\n    const fileName =\n        Math.random()\n            .toString(36)\n            .substr(2, 5) + '.html'\n    const htmlFile = new File([htmlBlob], fileName)\n    const res = await UploadContent(htmlFile)\n    const { s3url } = res\n    rest = _.assign({}, rest, { templatePath: s3url })\n    UpdateCampaignData(rest)\n}\n\nexport const SaveStep4 = async file => {\n    const formData = new FormData()\n    formData.append('input_file', file)\n    await UploadContent(file)\n}\n\n// aactions for sms\n\nexport const CreateSMSCampaignAction = async ({ next, ...params }) => {\n    Store.dispatch({\n        type: Types.CREATE_CAMPAIGN_LOADING,\n    })\n    try {\n        const response = await Api.CreateCampaignAction({ ...params })\n        const { data, success, error } = response\n        if (success) {\n            console.log(response, 'response on creating the campaign is here')\n            Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_UPDATE_DATA,\n                data: _.assign({}, params, response),\n            })\n            history.push(`/sms/${next}/${response.campaignId}`)\n        }\n    } catch (err) {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_FAILURE,\n            data: err.message,\n        })\n    }\n}\n"]},"metadata":{},"sourceType":"module"}