{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = makeAPI;\n\nfunction _semver() {\n  var data = _interopRequireDefault(require(\"semver\"));\n\n  _semver = function _semver() {\n    return data;\n  };\n\n  return data;\n}\n\nvar _ = require(\"../../\");\n\nvar _caching = require(\"../caching\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction makeAPI(cache) {\n  var env = function env(value) {\n    return cache.using(function (data) {\n      if (typeof value === \"undefined\") return data.envName;\n\n      if (typeof value === \"function\") {\n        return (0, _caching.assertSimpleType)(value(data.envName));\n      }\n\n      if (!Array.isArray(value)) value = [value];\n      return value.some(function (entry) {\n        if (typeof entry !== \"string\") {\n          throw new Error(\"Unexpected non-string value\");\n        }\n\n        return entry === data.envName;\n      });\n    });\n  };\n\n  var caller = function caller(cb) {\n    return cache.using(function (data) {\n      return (0, _caching.assertSimpleType)(cb(data.caller));\n    });\n  };\n\n  return {\n    version: _.version,\n    cache: cache.simple(),\n    env: env,\n    async: function async() {\n      return false;\n    },\n    caller: caller,\n    assertVersion: assertVersion\n  };\n}\n\nfunction assertVersion(range) {\n  if (typeof range === \"number\") {\n    if (!Number.isInteger(range)) {\n      throw new Error(\"Expected string or integer value.\");\n    }\n\n    range = \"^\".concat(range, \".0.0-0\");\n  }\n\n  if (typeof range !== \"string\") {\n    throw new Error(\"Expected string or integer value.\");\n  }\n\n  if (_semver().default.satisfies(_.version, range)) return;\n  var limit = Error.stackTraceLimit;\n\n  if (typeof limit === \"number\" && limit < 25) {\n    Error.stackTraceLimit = 25;\n  }\n\n  var err = new Error(\"Requires Babel \\\"\".concat(range, \"\\\", but was loaded with \\\"\").concat(_.version, \"\\\". \") + \"If you are sure you have a compatible version of @babel/core, \" + \"it is likely that something in your build process is loading the \" + \"wrong version. Inspect the stack trace of this error to look for \" + \"the first entry that doesn't mention \\\"@babel/core\\\" or \\\"babel-core\\\" \" + \"to see what is calling Babel.\");\n\n  if (typeof limit === \"number\") {\n    Error.stackTraceLimit = limit;\n  }\n\n  throw Object.assign(err, {\n    code: \"BABEL_VERSION_UNSUPPORTED\",\n    version: _.version,\n    range: range\n  });\n}","map":null,"metadata":{},"sourceType":"script"}