{"ast":null,"code":"import _regeneratorRuntime from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/chahanatyagi/Work/cm-frontend/src/pages/Login/index.jsx\";\nimport React, { Component } from 'react';\nimport history from '@/utils/history';\nimport '@okta/okta-signin-widget/dist/css/okta-sign-in.min.css';\nimport '@okta/okta-signin-widget/dist/css/okta-theme.css';\nimport { loginAction } from '../../actions/User';\nimport './index.scss';\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.showLogin =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              window.widget.remove();\n              window.widget.renderEl({\n                el: '#loginWidget'\n              }, _this.success, function () {\n                _this.logOutUser();\n\n                history.push('/login');\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    _this.success = function (response) {\n      loginAction({\n        'email': response[0].claims.email,\n        'oktaToken': response[0].idToken\n      });\n    };\n\n    _this.logOutUser = function () {\n      window.widget.session.close(function (err) {\n        window.widget.remove();\n        localStorage.removeItem('AUTH_TOKEN_KEY');\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.showLogin();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        id: \"loginWidget\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport { Login as default };","map":{"version":3,"sources":["/Users/chahanatyagi/Work/cm-frontend/src/pages/Login/index.jsx"],"names":["React","Component","history","loginAction","Login","showLogin","window","widget","remove","renderEl","el","success","logOutUser","push","response","claims","email","idToken","session","close","err","localStorage","removeItem"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,OAAP,MAAoB,iBAApB;AACA,OAAO,wDAAP;AACA,OAAO,kDAAP;AACA,SAASC,WAAT,QAA4B,oBAA5B;AACA,OAAO,cAAP;;IAEqBC,K;;;;;;;;;;;;;;;;;UACjBC,S;;;;6BAAY;AAAA;AAAA;AAAA;AAAA;AACRC,cAAAA,MAAM,CAACC,MAAP,CAAcC,MAAd;AACAF,cAAAA,MAAM,CAACC,MAAP,CAAcE,QAAd,CAAuB;AAAEC,gBAAAA,EAAE,EAAE;AAAN,eAAvB,EACI,MAAKC,OADT,EAEI,YAAM;AACF,sBAAKC,UAAL;;AACAV,gBAAAA,OAAO,CAACW,IAAR,CAAa,QAAb;AACH,eALL;;AAFQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;UAUZF,O,GAAU,UAACG,QAAD,EAAc;AACpBX,MAAAA,WAAW,CAAC;AAAE,iBAASW,QAAQ,CAAC,CAAD,CAAR,CAAYC,MAAZ,CAAmBC,KAA9B;AAAqC,qBAAaF,QAAQ,CAAC,CAAD,CAAR,CAAYG;AAA9D,OAAD,CAAX;AACH,K;;UACDL,U,GAAa,YAAM;AACfN,MAAAA,MAAM,CAACC,MAAP,CAAcW,OAAd,CAAsBC,KAAtB,CAA4B,UAAUC,GAAV,EAAe;AACvCd,QAAAA,MAAM,CAACC,MAAP,CAAcC,MAAd;AACAa,QAAAA,YAAY,CAACC,UAAb,CAAwB,gBAAxB;AACH,OAHD;AAIH,K;;;;;;;wCAEmB;AAChB,WAAKjB,SAAL;AACH;;;6BAEQ;AACL,aACI;AAAK,QAAA,EAAE,EAAC,aAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAGH;;;;EA7B8BJ,S;;SAAdG,K","sourcesContent":["import React, { Component } from 'react'\nimport history from '@/utils/history'\nimport '@okta/okta-signin-widget/dist/css/okta-sign-in.min.css';\nimport '@okta/okta-signin-widget/dist/css/okta-theme.css';\nimport { loginAction } from '../../actions/User'\nimport './index.scss'\n\nexport default class Login extends Component {\n    showLogin = async () => {\n        window.widget.remove();\n        window.widget.renderEl({ el: '#loginWidget' },\n            this.success,\n            () => {\n                this.logOutUser();\n                history.push('/login');\n            }\n        );\n    }\n    success = (response) => {\n        loginAction({ 'email': response[0].claims.email, 'oktaToken': response[0].idToken });\n    }\n    logOutUser = () => {\n        window.widget.session.close(function (err) {\n            window.widget.remove();\n            localStorage.removeItem('AUTH_TOKEN_KEY');\n        });\n    }\n\n    componentDidMount() {\n        this.showLogin();\n    }\n\n    render() {\n        return (\n            <div id=\"loginWidget\"></div>\n        )\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}