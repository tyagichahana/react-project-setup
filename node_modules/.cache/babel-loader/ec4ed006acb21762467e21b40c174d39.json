{"ast":null,"code":"import _objectSpread from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/chahanatyagi/Work/cm-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _ from 'lodash';\nimport Store from '@/reducer';\nimport Api from '@/utils/Api';\nimport * as Types from '@/constants/Types';\nimport history from '@/utils/history';\nexport var createParentId =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            try {\n              Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_LOADING\n              }); // const response = await Api.createParent() // TODO: uncomment before build\n\n              response = {\n                parentID: 34\n              };\n              Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_SUCCESS,\n                data: response\n              });\n            } catch (e) {\n              console.error(e);\n            }\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function createParentId() {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var GetCampaign =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(campaignID) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return Api.GetCampaignAction(campaignID);\n\n          case 3:\n            response = _context2.sent;\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_SUCCESS,\n              data: response\n            }); // console.log(response)\n\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE\n            });\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this, [[0, 7]]);\n  }));\n\n  return function GetCampaign(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var getParentDetails =\n/*#__PURE__*/\nfunction () {\n  var _ref3 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(parentId) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return Api.GetParentDetails(parentId);\n\n          case 3:\n            response = _context3.sent;\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_SUCCESS,\n              data: response\n            });\n            console.log(response);\n            _context3.next = 11;\n            break;\n\n          case 8:\n            _context3.prev = 8;\n            _context3.t0 = _context3[\"catch\"](0);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE\n            });\n\n          case 11:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, this, [[0, 8]]);\n  }));\n\n  return function getParentDetails(_x2) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var CreateCampaignAction =\n/*#__PURE__*/\nfunction () {\n  var _ref5 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4(_ref4) {\n    var next, params, response;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            next = _ref4.next, params = _objectWithoutProperties(_ref4, [\"next\"]);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_LOADING\n            });\n            _context4.prev = 2;\n            _context4.next = 5;\n            return Api.CreateCampaignAction(_objectSpread({}, params));\n\n          case 5:\n            response = _context4.sent;\n\n            if (response) {\n              Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_UPDATE_DATA,\n                data: _.assign({}, params, response)\n              });\n              history.push(\"/email/\".concat(next, \"/\").concat(response.campaignId));\n            }\n\n            _context4.next = 12;\n            break;\n\n          case 9:\n            _context4.prev = 9;\n            _context4.t0 = _context4[\"catch\"](2);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE,\n              data: _context4.t0.message\n            });\n\n          case 12:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, this, [[2, 9]]);\n  }));\n\n  return function CreateCampaignAction(_x3) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nexport var CreateCampaignBulk =\n/*#__PURE__*/\nfunction () {\n  var _ref6 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee5(requests, next) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.prev = 0;\n            requests = _.map(requests, function (part) {\n              return Api.CreateCampaignAction(part);\n            });\n            _context5.next = 4;\n            return Promise.all(requests);\n\n          case 4:\n            response = _context5.sent;\n            console.log(response, 'response of push in create');\n\n            if (!response.error) {\n              Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_SUCCESS,\n                data: response\n              });\n              history.push(next);\n            } else {\n              Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_FAILURE,\n                data: response.error\n              });\n            }\n\n            _context5.next = 12;\n            break;\n\n          case 9:\n            _context5.prev = 9;\n            _context5.t0 = _context5[\"catch\"](0);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE,\n              data: _context5.t0.message\n            });\n\n          case 12:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5, this, [[0, 9]]);\n  }));\n\n  return function CreateCampaignBulk(_x4, _x5) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nexport var UpdateCampaignBulk =\n/*#__PURE__*/\nfunction () {\n  var _ref7 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee6(requests, next) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.prev = 0;\n            requests = _.map(requests, function (part) {\n              return Api.UpdateCampaign(part);\n            });\n            _context6.next = 4;\n            return Promise.all(requests);\n\n          case 4:\n            response = _context6.sent;\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_SUCCESS,\n              data: response\n            });\n            history.push(next);\n            _context6.next = 12;\n            break;\n\n          case 9:\n            _context6.prev = 9;\n            _context6.t0 = _context6[\"catch\"](0);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE,\n              data: _context6.t0.message\n            });\n\n          case 12:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6, this, [[0, 9]]);\n  }));\n\n  return function UpdateCampaignBulk(_x6, _x7) {\n    return _ref7.apply(this, arguments);\n  };\n}();\nexport var UpdateCampaignData =\n/*#__PURE__*/\nfunction () {\n  var _ref9 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee7(_ref8) {\n    var next, params, response;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            next = _ref8.next, params = _objectWithoutProperties(_ref8, [\"next\"]);\n            console.log(params, 'params in update√•');\n            _context7.prev = 2;\n            _context7.next = 5;\n            return Api.UpdateCampaign(params);\n\n          case 5:\n            response = _context7.sent;\n\n            if (response) {\n              Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_UPDATE_DATA,\n                data: _.assign({}, params, response)\n              });\n              history.push(\"/email/\".concat(next, \"/\").concat(params.campaignId));\n            }\n\n            _context7.next = 12;\n            break;\n\n          case 9:\n            _context7.prev = 9;\n            _context7.t0 = _context7[\"catch\"](2);\n            Store.dispatch({\n              type: Types.CREATE_CAMPAIGN_FAILURE,\n              data: _context7.t0.message\n            });\n\n          case 12:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7, this, [[2, 9]]);\n  }));\n\n  return function UpdateCampaignData(_x8) {\n    return _ref9.apply(this, arguments);\n  };\n}();\nexport var UploadContent =\n/*#__PURE__*/\nfunction () {\n  var _ref10 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee8(file) {\n    var category,\n        formData,\n        _args8 = arguments;\n    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            category = _args8.length > 1 && _args8[1] !== undefined ? _args8[1] : 'email_template';\n            _context8.prev = 1;\n            formData = new FormData();\n            formData.append('file', file);\n            formData.append('category', category);\n            _context8.next = 7;\n            return Api.CreateContent(formData);\n\n          case 7:\n            return _context8.abrupt(\"return\", _context8.sent);\n\n          case 10:\n            _context8.prev = 10;\n            _context8.t0 = _context8[\"catch\"](1);\n            console.error(_context8.t0);\n            return _context8.abrupt(\"return\", null);\n\n          case 14:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8, this, [[1, 10]]);\n  }));\n\n  return function UploadContent(_x9) {\n    return _ref10.apply(this, arguments);\n  };\n}();\nexport var uploadFile =\n/*#__PURE__*/\nfunction () {\n  var _ref11 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee9(file) {\n    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            _context9.next = 2;\n            return UploadContent(file);\n\n          case 2:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9, this);\n  }));\n\n  return function uploadFile(_x10) {\n    return _ref11.apply(this, arguments);\n  };\n}();\nexport var SaveStep2 =\n/*#__PURE__*/\nfunction () {\n  var _ref13 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee10(_ref12) {\n    var htmlTemplate, rest, htmlBlob, fileName, htmlFile, res, s3url;\n    return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            htmlTemplate = _ref12.htmlTemplate, rest = _objectWithoutProperties(_ref12, [\"htmlTemplate\"]);\n            htmlBlob = new Blob([htmlTemplate], {\n              type: 'plain/text'\n            });\n            fileName = Math.random().toString(36).substr(2, 5) + '.html';\n            htmlFile = new File([htmlBlob], fileName);\n            _context10.next = 6;\n            return UploadContent(htmlFile);\n\n          case 6:\n            res = _context10.sent;\n            s3url = res.s3url;\n            rest = _.assign({}, rest, {\n              templatePath: s3url\n            });\n            UpdateCampaignData(rest);\n\n          case 10:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, _callee10, this);\n  }));\n\n  return function SaveStep2(_x11) {\n    return _ref13.apply(this, arguments);\n  };\n}();\nexport var SaveStep4 =\n/*#__PURE__*/\nfunction () {\n  var _ref14 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee11(file) {\n    var formData, response;\n    return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            formData = new FormData();\n            formData.append('input_file', file);\n            _context11.next = 4;\n            return UploadContent(file);\n\n          case 4:\n            response = _context11.sent;\n            console.log(response);\n\n          case 6:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, _callee11, this);\n  }));\n\n  return function SaveStep4(_x12) {\n    return _ref14.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["/Users/chahanatyagi/Work/cm-frontend/src/actions/CreateCampaign/PnCampaign.js"],"names":["_","Store","Api","Types","history","createParentId","dispatch","type","CREATE_CAMPAIGN_LOADING","response","parentID","CREATE_CAMPAIGN_SUCCESS","data","e","console","error","GetCampaign","campaignID","GetCampaignAction","CREATE_CAMPAIGN_FAILURE","getParentDetails","parentId","GetParentDetails","log","CreateCampaignAction","next","params","CREATE_CAMPAIGN_UPDATE_DATA","assign","push","campaignId","message","CreateCampaignBulk","requests","map","part","Promise","all","UpdateCampaignBulk","UpdateCampaign","UpdateCampaignData","UploadContent","file","category","formData","FormData","append","CreateContent","uploadFile","SaveStep2","htmlTemplate","rest","htmlBlob","Blob","fileName","Math","random","toString","substr","htmlFile","File","res","s3url","templatePath","SaveStep4"],"mappings":"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","sourcesContent":["import _ from 'lodash'\nimport Store from '@/reducer'\nimport Api from '@/utils/Api'\nimport * as Types from '@/constants/Types'\nimport history from '@/utils/history'\n\nexport const createParentId = async () => {\n    try {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_LOADING,\n        })\n        // const response = await Api.createParent() // TODO: uncomment before build\n        const response = { parentID: 34 }\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_SUCCESS,\n            data: response,\n        })\n    } catch (e) {\n        console.error(e)\n    }\n}\n\nexport const GetCampaign = async campaignID => {\n    try {\n        const response = await Api.GetCampaignAction(campaignID)\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_SUCCESS,\n            data: response,\n        })\n        // console.log(response)\n    } catch (err) {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_FAILURE,\n        })\n    }\n}\n\nexport const getParentDetails = async parentId => {\n    try {\n        const response = await Api.GetParentDetails(parentId)\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_SUCCESS,\n            data: response,\n        })\n        console.log(response)\n    } catch (err) {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_FAILURE,\n        })\n    }\n}\n\nexport const CreateCampaignAction = async ({ next, ...params }) => {\n    Store.dispatch({\n        type: Types.CREATE_CAMPAIGN_LOADING,\n    })\n    try {\n        const response = await Api.CreateCampaignAction({ ...params })\n        if (response) {\n            Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_UPDATE_DATA,\n                data: _.assign({}, params, response),\n            })\n            history.push(`/email/${next}/${response.campaignId}`)\n        }\n    } catch (err) {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_FAILURE,\n            data: err.message,\n        })\n    }\n}\n\nexport const CreateCampaignBulk = async (requests, next) => {\n    try {\n        requests = _.map(requests, part => {\n            return Api.CreateCampaignAction(part)\n        })\n        const response = await Promise.all(requests)\n        console.log(response, 'response of push in create')\n        if (!response.error) {\n            Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_SUCCESS,\n                data: response,\n            })\n            history.push(next)\n        } else {\n            Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_FAILURE,\n                data: response.error,\n            })\n        }\n    } catch (err) {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_FAILURE,\n            data: err.message,\n        })\n    }\n}\n\nexport const UpdateCampaignBulk = async (requests, next) => {\n    try {\n        requests = _.map(requests, part => {\n            return Api.UpdateCampaign(part)\n        })\n        const response = await Promise.all(requests)\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_SUCCESS,\n            data: response,\n        })\n        history.push(next)\n    } catch (err) {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_FAILURE,\n            data: err.message,\n        })\n    }\n}\n\nexport const UpdateCampaignData = async ({ next, ...params }) => {\n    console.log(params, 'params in update√•')\n    try {\n        const response = await Api.UpdateCampaign(params)\n        if (response) {\n            Store.dispatch({\n                type: Types.CREATE_CAMPAIGN_UPDATE_DATA,\n                data: _.assign({}, params, response),\n            })\n            history.push(`/email/${next}/${params.campaignId}`)\n        }\n    } catch (err) {\n        Store.dispatch({\n            type: Types.CREATE_CAMPAIGN_FAILURE,\n            data: err.message,\n        })\n    }\n}\n\nexport const UploadContent = async (file, category = 'email_template') => {\n    try {\n        const formData = new FormData()\n        formData.append('file', file)\n        formData.append('category', category)\n        return await Api.CreateContent(formData)\n    } catch (e) {\n        console.error(e)\n        return null\n    }\n}\n\nexport const uploadFile = async file => {\n    await UploadContent(file)\n}\n\nexport const SaveStep2 = async ({ htmlTemplate, ...rest }) => {\n    const htmlBlob = new Blob([htmlTemplate], { type: 'plain/text' })\n    const fileName =\n        Math.random()\n            .toString(36)\n            .substr(2, 5) + '.html'\n    const htmlFile = new File([htmlBlob], fileName)\n    const res = await UploadContent(htmlFile)\n    const { s3url } = res\n    rest = _.assign({}, rest, { templatePath: s3url })\n    UpdateCampaignData(rest)\n}\n\nexport const SaveStep4 = async file => {\n    const formData = new FormData()\n    formData.append('input_file', file)\n    const response = await UploadContent(file)\n    console.log(response)\n}\n"]},"metadata":{},"sourceType":"module"}